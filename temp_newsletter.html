<div class="newsletter">
    <h2>Stay Updated</h2>
    <p>Get weekly quantum computing insights delivered to your inbox</p>
    <form id="newsletterForm" class="newsletter-form" action="https://formspree.io/f/mnnggjwr" method="POST">
        <input type="email" name="email" id="newsletterEmail" placeholder="your@email.com" required>
        <button type="submit" id="submitBtn">Subscribe</button>
    </form>
    <div id="formMessage" style="margin-top: 20px; display: none;"></div>
</div>

<script>
document.getElementById('newsletterForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const form = e.target;
    const submitBtn = document.getElementById('submitBtn');
    const message = document.getElementById('formMessage');
    const email = document.getElementById('newsletterEmail').value;
    
    // Disable button and show loading
    submitBtn.disabled = true;
    submitBtn.textContent = 'Subscribing...';
    
    try {
        const response = await fetch('https://formspree.io/f/mnnggjwr', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                email: email,
                _subject: 'New Cirquit Blog Subscriber'
            })
        });
        
        if (response.ok) {
            message.style.display = 'block';
            message.style.color = '#10b981';
            message.textContent = '✓ Success! Check your email to confirm.';
            form.reset();
        } else {
            throw new Error('Submission failed');
        }
    } catch (error) {
        message.style.display = 'block';
        message.style.color = '#ef4444';
        message.textContent = '✗ Something went wrong. Please try again.';
    } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Subscribe';
    }
});
</script>
